# 基本系统安装

本文将为你介绍如何安装 Arch Linux 基本系统。

如果你还没有制作 Arch Linux 启动盘，请阅读 [准备安装#准备安装介质](/guide/getting-started/#准备安装介质)。

如果你是想安装 Arch Linux + Windows 双系统，请阅读 [多系统安装#Windows](/advanced/Dual-boot/#Windows) 部分。

## 连接网络

成功启动到 archiso 后，你会看到如下界面

![archiso](./bf76fecd4806a.png)

::: tip

上图中 root 是用戶名。如果用户名出现数字，则该数字代表上一个命令的 exit status。

正常结束的命令 exit status 是 0，默认不会显示出来。如果出现 1、2、127 这种则是某种东西报错。

:::

### 选择合适的网络连接方式

你可以选择下面适合你的连接方式连接网络。


#### 连接有线网络

如果你能连接有线网络，最好的办法是直接插网线连接网络。

（至于网线怎么插总不用我说了吧...)

#### 连接无线网络

如果你电脑有无线网卡的话（绝大多数电脑应该都有），则可以尝试通过 WiFi 连接。我们可以通过 archiso 内置的 iwd 软件完成这一过程。

::: tip

 2020 年 7 月的 ArchISO 砍掉了 netctl，经典的 wifi-menu 已被 iwctl 取代。如果你在某个教程里还看到了「使用 wifi-menu 连接 WiFi」这样的字样，请提醒作者更新教程……

 ~~所以 wpa_supplicant 使用者竟成最后赢家。~~

:::

在使用 iwctl 之前，我们需要先检查一下你的网卡是否被物理禁用或软件禁用。

物理禁用一般需要你的电脑存在可以物理按键或滑块可以手动关闭或打开网卡（当然，我觉得大多数电脑是没有这玩意的）。

软件禁用则考虑网卡是否被 rfkill 禁用，目前已知 ideapad（联想小新系列）会自动禁用无线网卡和蓝牙。

对于无线网卡被 rfkill 禁用的用户，输入以下命令解除 block
```bash
rfkill unblock all
```

在确认无误后，输入 `iwctl` 进入 iwd 的 shell。

输入 `device list` 列出你电脑的无线网络设备（一般就是你电脑的网卡）

常见的网卡名称是 `wlan0` 这样的。请根据自己电脑的实际情况判断。

输入如下命令列出所有网络，命令中的 `device` 需要替换为你上一步看到的网卡的名称

```bash
station device get-networks
```

比如，如果你的网卡名称是 `wlan0`，那么你应该输入的命令是

```bash
station wlan0 get-networks
```

如果你的电脑无线网卡工作正常的话，此时屏幕上会列出你熟悉的 WiFi 名称。如果没有任何结果或者出现报错的话，则需要你自己检查是否是网卡出现问题或者你打错了某个字符或者少了空格。

输入如下命令连接 WiFi，就像上面一样，`device` 需要替换成你电脑网卡的名字，`SSID` 需要替换成你想要连接且上面已经列出的 WiFi 名称

```bash
station device connect SSID
```

如果 WiFi 有密码，此时会提示你输入密码，输入 WiFi 密码后回车即可。

完成上述操作后，输入 `exit` 退出 iwd 的 shell。

::: warning

部分 WiFi 名称中可能含有特殊字符，比如中文或者 emoji。终端无法输入这些特殊字符因此无法连接到该 WiFi。

建议更改 WiFi 名称或者更换其他连接方式

:::

#### 借助 Android 网络共享连接

因为国内手机的 Android 系统大多数是由厂商自行修改过的，因此不便统一描述。建议自行搜索所使用系统的操作方法。

简而言之，Android 可以通过以下两种方式共享网络连接：

- USB 网络共享，效果与插网线等同
- 热点共享，操作步骤和效果于连接 WiFi 等同

#### 检查网络连接

为了检测电脑真的是否连接上网络，我们可以输入如下命令检测

```bash
ping www.baidu.com
```

ping 后面的网址可以是任何国内可以直连的网址。

如果已连接上网络，则电脑会疯狂输出一大堆延迟测试数据。反之则只有简单的`Timeout`报错或长时间无输出结果。

下面是成功连接网络的情况

![ping](./image-20210826012216506.png)



此时按 `Ctrl+C` 以中止输出。

::: tip

`Ctrl+C` 的意思是同时按住 Ctrl 键和 C 键，是 Linux 终端下常用的中止当前进程的方法之一。

`Ctrl+C` 可以近似理解为强行终止当前终端的活动进程（实际上只是发出相应信号，~~程序到底会不会停下来还得看它心情~~)。

比如上面，ping 这个进程正在运行，我们通过 `Ctrl+C` 将它强行终止。

:::

## 设置系统时间

输入如下命令进行 NTP 时间同步。

```bash
timedatectl set-ntp true
```

可以输入如下命令检测当前时间状态。

```bash
timedatectl status
```

输出结果大致如下图所示

![time status](./image-20210826013504394.png)

如果因为各种原因无法同步时间，也可以输入下面的命令手动同步时间

```
timectl set-time "yyyy-MM-dd hh:mm:ss"
```

其中 y 代表年(year)，M 代表月(month)，d 代表天(day)，h 代表小时(hour)，m 代表分(minute)，s 代表秒(second)。

例如：

```bash
timectl set-time "2021-08-25 22:39:42"
```

## 设置硬盘分区

该部分还在编写中
